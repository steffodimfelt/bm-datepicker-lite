import { trigger, state, style, transition, animate } from '@angular/animations';
import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { Validators } from '@angular/forms';
import stylesDefault from './styles-default';
import * as i0 from "@angular/core";
import * as i1 from "./services/calendar-years.service";
import * as i2 from "./services/calendar-months.service";
import * as i3 from "./services/calendar-days.service";
import * as i4 from "@angular/common";
import * as i5 from "@angular/forms";
export class BmDatepickerLiteComponent {
    constructor(elementRef, calendarYearsService, calendarMonthsService, calendarDaysService) {
        this.elementRef = elementRef;
        this.calendarYearsService = calendarYearsService;
        this.calendarMonthsService = calendarMonthsService;
        this.calendarDaysService = calendarDaysService;
        this.label = null;
        this.styleSheet = null;
        this.weekdays = null;
        this.months = null;
        this.formControlNameInput = 'defaultFormControlName';
        this.placeholder = 'Pick a date';
        this.pattern = 'yyyy-mm-dd';
        this.calendarOutput = new EventEmitter();
        this.date = new Date();
        this.inputData = { year: '0', month: '0', day: '0' };
        this.showDatePicker = false;
        this.styleElement = null;
        this.selectNext = () => {
            this.calendarMonthsService.nextMonth();
            this.calendarYearsService.selectedYear =
                this.calendarMonthsService.selectedMonth === 0
                    ? this.calendarYearsService.selectedYear + 1
                    : this.calendarYearsService.selectedYear;
            this.setFirstAndLastDay();
        };
        this.selectPrevious = () => {
            this.calendarMonthsService.previousMonth();
            this.calendarYearsService.selectedYear =
                this.calendarMonthsService.selectedMonth === 11
                    ? this.calendarYearsService.selectedYear - 1
                    : this.calendarYearsService.selectedYear;
            this.setFirstAndLastDay();
        };
        this.selectDay = (dayValue) => {
            this.inputData = {
                year: this.calendarYearsService.returnYearDate(dayValue).toString(),
                month: this.calendarMonthsService.returnMonthDate(dayValue).toString(),
                day: this.calendarDaysService.returnWeekdayDate(dayValue).toString()
            };
            this.selectedDayDate(dayValue);
            const formatDate = this.formatedDate();
            this.formGroupInput?.controls[this.formControlNameInput]?.setValue(formatDate);
            this.calendarOutput.emit(formatDate);
            this.bmDatePicker.nativeElement.value = formatDate;
            this.showDatePicker = false;
        };
        this.selectedDayDate = (dayDate) => {
            let parsedDay = this.calendarDaysService
                .returnWeekdayDate(dayDate)
                .toString();
            let selectParsedMonth = this.calendarMonthsService.returnMonthDate(dayDate) + 1;
            selectParsedMonth = selectParsedMonth.toString();
            selectParsedMonth.length < 2 &&
                (selectParsedMonth = `0${selectParsedMonth}`);
            let parsedYear = this.calendarYearsService
                .returnYearDate(dayDate)
                .toString();
            if (parsedDay.length < 2)
                parsedDay = `0${parsedDay}`;
            if (parsedYear === this.inputData.year &&
                selectParsedMonth === this.inputData.month &&
                parsedDay === this.inputData.day) {
                return true;
            }
            return false;
        };
        this.formatedDate = () => {
            const formatedMonth = parseInt(this.inputData.month) + 1;
            formatedMonth.toString().length < 2
                ? (this.inputData.month = `0${formatedMonth.toString()}`)
                : (this.inputData.month = `${formatedMonth.toString()}`);
            this.inputData.day.length < 2 &&
                (this.inputData.day = `0${this.inputData.day}`);
            let formatedYear = this.inputData.year.toString();
            const getFullYear = this.pattern.match('yyyy');
            if (getFullYear === null) {
                formatedYear =
                    formatedYear.slice(-1, 1) + formatedYear.slice(2, formatedYear.length);
            }
            const divider = this.pattern.match('[ -./]');
            let dateArray = [];
            const patternArray = this.pattern.split(divider[0]);
            patternArray.forEach((format) => {
                if (format === 'dd') {
                    dateArray.push(this.inputData.day);
                }
                else if (format === 'mm') {
                    dateArray.push(this.inputData.month);
                }
                else {
                    dateArray.push(formatedYear);
                }
            });
            return `${dateArray[0]}${divider}${dateArray[1]}${divider}${dateArray[2]}`;
        };
    }
    ngOnInit() {
        this.calendarYearsService.year = this.date;
        this.calendarMonthsService.month = this.date;
        this.calendarDaysService.day = this.date;
        this.calendarDaysService.selectedDay = null;
        !!this.weekdays && (this.calendarDaysService.dayLabels = this.weekdays);
        !!this.months && (this.calendarMonthsService.monthLabels = this.months);
        this.createStyle();
        const divider = this.pattern.match('[ -./]');
        const patternArray = this.pattern.split(divider[0]);
        const validatePattern = `[0-9]{${patternArray[0].length}}${divider}[0-9]{${patternArray[1].length}}${divider}[0-9]{${patternArray[2].length}}`;
        this.formGroupInput
            ?.get(this.formControlNameInput)
            ?.addValidators(Validators.pattern(validatePattern));
    }
    createStyle() {
        if (this.styleElement) {
            this.styleElement.removeChild(this.styleElement.firstChild);
        }
        else {
            this.styleElement = document.createElement('style');
        }
        if (this.styleSheet) {
            this.styleSheet = this.styleSheet
                .replace('}', `} #${this.formControlNameInput} `)
                .replace(',', `, #${this.formControlNameInput} `);
            this.styleSheet = `${stylesDefault} #${this.formControlNameInput}  ${this.styleSheet}`;
        }
        else {
            this.styleSheet = stylesDefault;
        }
        this.styleElement.appendChild(document.createTextNode(this.styleSheet));
        this.elementRef.nativeElement.appendChild(this.styleElement);
    }
    setFirstAndLastDay() {
        this.calendarMonthsService.firstDayOfSelectedMonth(this.calendarYearsService.selectedYear, this.calendarMonthsService.selectedMonth);
        this.calendarMonthsService.lastDayOfSelectedMonth(this.calendarYearsService.selectedYear, this.calendarMonthsService.selectedMonth);
    }
}
BmDatepickerLiteComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.0.0", ngImport: i0, type: BmDatepickerLiteComponent, deps: [{ token: i0.ElementRef }, { token: i1.CalendarYearsService }, { token: i2.CalendarMonthsService }, { token: i3.CalendarDaysService }], target: i0.ɵɵFactoryTarget.Component });
BmDatepickerLiteComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.0.0", type: BmDatepickerLiteComponent, selector: "bm-datepicker-lite", inputs: { label: "label", styleSheet: "styleSheet", weekdays: "weekdays", months: "months", formGroupInput: "formGroupInput", formControlNameInput: "formControlNameInput", placeholder: "placeholder", pattern: "pattern" }, outputs: { calendarOutput: "calendarOutput" }, viewQueries: [{ propertyName: "bmDatePicker", first: true, predicate: ["bmDatePicker"], descendants: true }], ngImport: i0, template: "<div id=\"{{ formControlNameInput }}\">\n  <label for=\"bm-date-input\">{{ label }}</label>\n  <div class=\"bm-date-input-wrapper\">\n    <div *ngIf=\"!formGroupInput\" class=\"bm-date-input-wrapper\">\n      <input\n        #bmDatePicker\n        readonly\n        [pattern]=\"pattern\"\n        placeholder=\"{{ placeholder }}\"\n        class=\"bm-date-input bm-date-input-pointer\" />\n    </div>\n    <div\n      *ngIf=\"!!formGroupInput\"\n      [formGroup]=\"formGroupInput\"\n      class=\"bm-date-input-wrapper\">\n      <input\n        #bmDatePicker\n        readonly\n        formControlName=\"{{ formControlNameInput }}\"\n        placeholder=\"{{ placeholder }}\"\n        class=\"bm-date-input bm-date-input-pointer\" />\n    </div>\n    <div class=\"bm-toggle-button\" (click)=\"showDatePicker = !showDatePicker\">\n      <ng-content></ng-content>\n      <div class=\"bm-default-calendar bm-default-calendar-icon\">\n        <div class=\"upper-line\">\n          <div class=\"inner\"></div>\n          <div class=\"inner\"></div>\n        </div>\n        <div class=\"inner-line\"></div>\n      </div>\n    </div>\n  </div>\n\n  <div [@toggleTable]=\"showDatePicker ? 'open' : 'close'\" class=\"bm-table\">\n    <div class=\"bm-tr\">\n      <div\n        *ngIf=\"\n          calendarYearsService.selectedYear ===\n            calendarYearsService.currentYear &&\n            calendarMonthsService.selectedMonth ===\n              calendarMonthsService.currentMonth;\n          else previousYearButton\n        \"\n        class=\"bm-td-empty-month\"></div>\n      <ng-template #previousYearButton>\n        <div class=\"bm-td\">\n          <div class=\"bm-td-inner\" (click)=\"selectPrevious()\">\n            <span class=\"bm-arrow bm-arrow-left\"></span>\n          </div>\n        </div>\n      </ng-template>\n      <div class=\"bm-year-month-title\">\n        <p class=\"bm-date-p bm-month-title\">\n          {{ calendarMonthsService.selectedMonthName }}\n        </p>\n        <p class=\"bm-date-p bm-year-title\">\n          {{ calendarYearsService.selectedYear }}\n        </p>\n      </div>\n      <div class=\"bm-td\">\n        <div class=\"bm-td-inner\" (click)=\"selectNext()\">\n          <span class=\"bm-arrow bm-arrow-right\"></span>\n        </div>\n      </div>\n    </div>\n    <div class=\"bm-tr bm-daylabels-wrapper\">\n      <div\n        *ngFor=\"let weekdayLabel of calendarDaysService.dayLabels\"\n        class=\"bm-th\">\n        <p class=\"bm-date-p\">{{ weekdayLabel }}</p>\n      </div>\n    </div>\n    <div\n      *ngFor=\"let weekRow of calendarMonthsService.selectedMonthDaysArray\"\n      class=\"bm-tr\">\n      <div\n        *ngFor=\"let dayDate of weekRow; let dayIndex = index\"\n        [ngClass]=\"{\n          'bm-td': dayDate,\n          'bm-td-empty': !dayDate\n        }\">\n        <div\n          (click)=\"selectDay(dayDate)\"\n          [ngClass]=\"{\n            'bm-td-inner': dayDate,\n            'bm-td-inner-empty': !dayDate,\n            'bm-td-current-day':\n              calendarYearsService.selectedYear ===\n                calendarYearsService.currentYear &&\n              calendarMonthsService.selectedMonth ===\n                calendarMonthsService.currentMonth &&\n              dayDate &&\n              calendarDaysService.returnWeekdayDate(dayDate) ===\n                calendarDaysService.currentDay &&\n              calendarDaysService.selectedDay !==\n                calendarDaysService.returnWeekdayDate(dayDate),\n            'bm-td-before-day':\n              calendarYearsService.selectedYear ===\n                calendarYearsService.currentYear &&\n              calendarMonthsService.selectedMonth ===\n                calendarMonthsService.currentMonth &&\n              dayDate &&\n              calendarDaysService.returnWeekdayDate(dayDate) <\n                calendarDaysService.currentDay,\n            'bm-td-selected-day': dayDate && selectedDayDate(dayDate)\n          }\">\n          <p\n            class=\"bm-date-p\"\n            [class.bm-weekend]=\"dayDate && (dayIndex === 5 || dayIndex === 6)\">\n            {{ dayDate && calendarDaysService.returnWeekdayDate(dayDate) }}\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n", styles: [".bm-default-calendar:not(:only-child){display:none;width:16px;height:16px}.bm-default-calendar-icon{width:14px;height:14px;border:.1rem solid #fff;border-radius:3px;box-sizing:border-box;display:flex;flex-direction:column}.bm-default-calendar-icon .upper-line{width:100%;height:.3rem;display:flex;flex-direction:row;justify-content:space-around}.bm-default-calendar-icon .upper-line .inner{height:.25rem;width:.1rem;background-color:#fff;margin-top:-.2rem}.bm-default-calendar-icon .inner-line{height:.1rem;width:100%;background-color:#fff;margin-top:-.1rem}\n"], dependencies: [{ kind: "directive", type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i5.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i5.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i5.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i5.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i5.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }], animations: [
        trigger('toggleTable', [
            state('open', style({
                opacity: 1,
                marginTop: '10px'
            })),
            state('close', style({
                height: 0,
                padding: 0,
                opacity: 0,
                marginTop: 0
            })),
            transition('open <=> close', [animate('.2s ease-out')])
        ])
    ] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.0.0", ngImport: i0, type: BmDatepickerLiteComponent, decorators: [{
            type: Component,
            args: [{ selector: 'bm-datepicker-lite', animations: [
                        trigger('toggleTable', [
                            state('open', style({
                                opacity: 1,
                                marginTop: '10px'
                            })),
                            state('close', style({
                                height: 0,
                                padding: 0,
                                opacity: 0,
                                marginTop: 0
                            })),
                            transition('open <=> close', [animate('.2s ease-out')])
                        ])
                    ], template: "<div id=\"{{ formControlNameInput }}\">\n  <label for=\"bm-date-input\">{{ label }}</label>\n  <div class=\"bm-date-input-wrapper\">\n    <div *ngIf=\"!formGroupInput\" class=\"bm-date-input-wrapper\">\n      <input\n        #bmDatePicker\n        readonly\n        [pattern]=\"pattern\"\n        placeholder=\"{{ placeholder }}\"\n        class=\"bm-date-input bm-date-input-pointer\" />\n    </div>\n    <div\n      *ngIf=\"!!formGroupInput\"\n      [formGroup]=\"formGroupInput\"\n      class=\"bm-date-input-wrapper\">\n      <input\n        #bmDatePicker\n        readonly\n        formControlName=\"{{ formControlNameInput }}\"\n        placeholder=\"{{ placeholder }}\"\n        class=\"bm-date-input bm-date-input-pointer\" />\n    </div>\n    <div class=\"bm-toggle-button\" (click)=\"showDatePicker = !showDatePicker\">\n      <ng-content></ng-content>\n      <div class=\"bm-default-calendar bm-default-calendar-icon\">\n        <div class=\"upper-line\">\n          <div class=\"inner\"></div>\n          <div class=\"inner\"></div>\n        </div>\n        <div class=\"inner-line\"></div>\n      </div>\n    </div>\n  </div>\n\n  <div [@toggleTable]=\"showDatePicker ? 'open' : 'close'\" class=\"bm-table\">\n    <div class=\"bm-tr\">\n      <div\n        *ngIf=\"\n          calendarYearsService.selectedYear ===\n            calendarYearsService.currentYear &&\n            calendarMonthsService.selectedMonth ===\n              calendarMonthsService.currentMonth;\n          else previousYearButton\n        \"\n        class=\"bm-td-empty-month\"></div>\n      <ng-template #previousYearButton>\n        <div class=\"bm-td\">\n          <div class=\"bm-td-inner\" (click)=\"selectPrevious()\">\n            <span class=\"bm-arrow bm-arrow-left\"></span>\n          </div>\n        </div>\n      </ng-template>\n      <div class=\"bm-year-month-title\">\n        <p class=\"bm-date-p bm-month-title\">\n          {{ calendarMonthsService.selectedMonthName }}\n        </p>\n        <p class=\"bm-date-p bm-year-title\">\n          {{ calendarYearsService.selectedYear }}\n        </p>\n      </div>\n      <div class=\"bm-td\">\n        <div class=\"bm-td-inner\" (click)=\"selectNext()\">\n          <span class=\"bm-arrow bm-arrow-right\"></span>\n        </div>\n      </div>\n    </div>\n    <div class=\"bm-tr bm-daylabels-wrapper\">\n      <div\n        *ngFor=\"let weekdayLabel of calendarDaysService.dayLabels\"\n        class=\"bm-th\">\n        <p class=\"bm-date-p\">{{ weekdayLabel }}</p>\n      </div>\n    </div>\n    <div\n      *ngFor=\"let weekRow of calendarMonthsService.selectedMonthDaysArray\"\n      class=\"bm-tr\">\n      <div\n        *ngFor=\"let dayDate of weekRow; let dayIndex = index\"\n        [ngClass]=\"{\n          'bm-td': dayDate,\n          'bm-td-empty': !dayDate\n        }\">\n        <div\n          (click)=\"selectDay(dayDate)\"\n          [ngClass]=\"{\n            'bm-td-inner': dayDate,\n            'bm-td-inner-empty': !dayDate,\n            'bm-td-current-day':\n              calendarYearsService.selectedYear ===\n                calendarYearsService.currentYear &&\n              calendarMonthsService.selectedMonth ===\n                calendarMonthsService.currentMonth &&\n              dayDate &&\n              calendarDaysService.returnWeekdayDate(dayDate) ===\n                calendarDaysService.currentDay &&\n              calendarDaysService.selectedDay !==\n                calendarDaysService.returnWeekdayDate(dayDate),\n            'bm-td-before-day':\n              calendarYearsService.selectedYear ===\n                calendarYearsService.currentYear &&\n              calendarMonthsService.selectedMonth ===\n                calendarMonthsService.currentMonth &&\n              dayDate &&\n              calendarDaysService.returnWeekdayDate(dayDate) <\n                calendarDaysService.currentDay,\n            'bm-td-selected-day': dayDate && selectedDayDate(dayDate)\n          }\">\n          <p\n            class=\"bm-date-p\"\n            [class.bm-weekend]=\"dayDate && (dayIndex === 5 || dayIndex === 6)\">\n            {{ dayDate && calendarDaysService.returnWeekdayDate(dayDate) }}\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n", styles: [".bm-default-calendar:not(:only-child){display:none;width:16px;height:16px}.bm-default-calendar-icon{width:14px;height:14px;border:.1rem solid #fff;border-radius:3px;box-sizing:border-box;display:flex;flex-direction:column}.bm-default-calendar-icon .upper-line{width:100%;height:.3rem;display:flex;flex-direction:row;justify-content:space-around}.bm-default-calendar-icon .upper-line .inner{height:.25rem;width:.1rem;background-color:#fff;margin-top:-.2rem}.bm-default-calendar-icon .inner-line{height:.1rem;width:100%;background-color:#fff;margin-top:-.1rem}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i1.CalendarYearsService }, { type: i2.CalendarMonthsService }, { type: i3.CalendarDaysService }]; }, propDecorators: { bmDatePicker: [{
                type: ViewChild,
                args: ['bmDatePicker']
            }], label: [{
                type: Input
            }], styleSheet: [{
                type: Input
            }], weekdays: [{
                type: Input
            }], months: [{
                type: Input
            }], formGroupInput: [{
                type: Input
            }], formControlNameInput: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], pattern: [{
                type: Input
            }], calendarOutput: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm0tZGF0ZXBpY2tlci1saXRlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL2JtLWRhdGVwaWNrZXItbGl0ZS9zcmMvbGliL2JtLWRhdGVwaWNrZXItbGl0ZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9ibS1kYXRlcGlja2VyLWxpdGUvc3JjL2xpYi9ibS1kYXRlcGlja2VyLWxpdGUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLE9BQU8sRUFDUCxLQUFLLEVBQ0wsS0FBSyxFQUNMLFVBQVUsRUFDVixPQUFPLEVBQ1IsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QixPQUFPLEVBQ0wsU0FBUyxFQUVULFlBQVksRUFDWixLQUFLLEVBRUwsTUFBTSxFQUNOLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQWEsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFLdkQsT0FBTyxhQUFhLE1BQU0sa0JBQWtCLENBQUM7Ozs7Ozs7QUE0QjdDLE1BQU0sT0FBTyx5QkFBeUI7SUFpQnBDLFlBQ1UsVUFBc0IsRUFDdkIsb0JBQTBDLEVBQzFDLHFCQUE0QyxFQUM1QyxtQkFBd0M7UUFIdkMsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUN2Qix5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXNCO1FBQzFDLDBCQUFxQixHQUFyQixxQkFBcUIsQ0FBdUI7UUFDNUMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQW5CeEMsVUFBSyxHQUFtQixJQUFJLENBQUM7UUFDN0IsZUFBVSxHQUFRLElBQUksQ0FBQztRQUN2QixhQUFRLEdBQVEsSUFBSSxDQUFDO1FBQ3JCLFdBQU0sR0FBUSxJQUFJLENBQUM7UUFFbkIseUJBQW9CLEdBQVcsd0JBQXdCLENBQUM7UUFDeEQsZ0JBQVcsR0FBVyxhQUFhLENBQUM7UUFDcEMsWUFBTyxHQUFXLFlBQVksQ0FBQztRQUM5QixtQkFBYyxHQUFzQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBRWpFLFNBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ2xCLGNBQVMsR0FBRyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDaEQsbUJBQWMsR0FBRyxLQUFLLENBQUM7UUFDdkIsaUJBQVksR0FBUSxJQUFJLENBQUM7UUE2Q3pCLGVBQVUsR0FBRyxHQUFHLEVBQUU7WUFDaEIsSUFBSSxDQUFDLHFCQUFxQixDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3ZDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxZQUFZO2dCQUNwQyxJQUFJLENBQUMscUJBQXFCLENBQUMsYUFBYSxLQUFLLENBQUM7b0JBQzVDLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxHQUFHLENBQUM7b0JBQzVDLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxDQUFDO1lBRTdDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQzVCLENBQUMsQ0FBQztRQUNGLG1CQUFjLEdBQUcsR0FBRyxFQUFFO1lBQ3BCLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUMzQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWTtnQkFDcEMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGFBQWEsS0FBSyxFQUFFO29CQUM3QyxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFlBQVksR0FBRyxDQUFDO29CQUM1QyxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFlBQVksQ0FBQztZQUU3QyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUM1QixDQUFDLENBQUM7UUFDRixjQUFTLEdBQUcsQ0FBQyxRQUFhLEVBQUUsRUFBRTtZQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHO2dCQUNmLElBQUksRUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsRUFBRTtnQkFDbkUsS0FBSyxFQUFFLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxFQUFFO2dCQUN0RSxHQUFHLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsRUFBRTthQUNyRSxDQUFDO1lBQ0YsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMvQixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDdkMsSUFBSSxDQUFDLGNBQWMsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEVBQUUsUUFBUSxDQUNoRSxVQUFVLENBQ1gsQ0FBQztZQUNGLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUM7WUFDbkQsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7UUFDOUIsQ0FBQyxDQUFDO1FBRUYsb0JBQWUsR0FBRyxDQUFDLE9BQVksRUFBRSxFQUFFO1lBQ2pDLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxtQkFBbUI7aUJBQ3JDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQztpQkFDMUIsUUFBUSxFQUFFLENBQUM7WUFDZCxJQUFJLGlCQUFpQixHQUNuQixJQUFJLENBQUMscUJBQXFCLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMxRCxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNqRCxpQkFBaUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQztnQkFDMUIsQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLGlCQUFpQixFQUFFLENBQUMsQ0FBQztZQUNoRCxJQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsb0JBQW9CO2lCQUN2QyxjQUFjLENBQUMsT0FBTyxDQUFDO2lCQUN2QixRQUFRLEVBQUUsQ0FBQztZQUNkLElBQUksU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDO2dCQUFFLFNBQVMsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO1lBQ3RELElBQ0UsVUFBVSxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSTtnQkFDbEMsaUJBQWlCLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLO2dCQUMxQyxTQUFTLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQ2hDO2dCQUNBLE9BQU8sSUFBSSxDQUFDO2FBQ2I7WUFDRCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUMsQ0FBQztRQUVGLGlCQUFZLEdBQUcsR0FBRyxFQUFFO1lBQ2xCLE1BQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN6RCxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUM7Z0JBQ2pDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLElBQUksYUFBYSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUM7Z0JBQ3pELENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLEdBQUcsYUFBYSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUUzRCxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQztnQkFDM0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztZQUNsRCxJQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUVsRCxNQUFNLFdBQVcsR0FBUSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNwRCxJQUFJLFdBQVcsS0FBSyxJQUFJLEVBQUU7Z0JBQ3hCLFlBQVk7b0JBQ1YsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDMUU7WUFFRCxNQUFNLE9BQU8sR0FBUSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNsRCxJQUFJLFNBQVMsR0FBUSxFQUFFLENBQUM7WUFDeEIsTUFBTSxZQUFZLEdBQVEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekQsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQWMsRUFBRSxFQUFFO2dCQUN0QyxJQUFJLE1BQU0sS0FBSyxJQUFJLEVBQUU7b0JBQ25CLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztpQkFDcEM7cUJBQU0sSUFBSSxNQUFNLEtBQUssSUFBSSxFQUFFO29CQUMxQixTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ3RDO3FCQUFNO29CQUNMLFNBQVMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7aUJBQzlCO1lBQ0gsQ0FBQyxDQUFDLENBQUM7WUFDSCxPQUFPLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQzdFLENBQUMsQ0FBQztJQTVIQyxDQUFDO0lBRUosUUFBUTtRQUNOLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUMzQyxJQUFJLENBQUMscUJBQXFCLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDN0MsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQzVDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDeEUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUV4RSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFbkIsTUFBTSxPQUFPLEdBQVEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEQsTUFBTSxZQUFZLEdBQVEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekQsTUFBTSxlQUFlLEdBQUcsU0FBUyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLE9BQU8sU0FBUyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLE9BQU8sU0FBUyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUM7UUFDL0ksSUFBSSxDQUFDLGNBQWM7WUFDakIsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDO1lBQ2hDLEVBQUUsYUFBYSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNyQixJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQzdEO2FBQU07WUFDTCxJQUFJLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDckQ7UUFDRCxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVTtpQkFDOUIsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxDQUFDO2lCQUNoRCxPQUFPLENBQUMsR0FBRyxFQUFFLE1BQU0sSUFBSSxDQUFDLG9CQUFvQixHQUFHLENBQUMsQ0FBQztZQUNwRCxJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsYUFBYSxLQUFLLElBQUksQ0FBQyxvQkFBb0IsS0FBSyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7U0FDeEY7YUFBTTtZQUNMLElBQUksQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFDO1NBQ2pDO1FBQ0QsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztRQUN4RSxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUEwRkQsa0JBQWtCO1FBQ2hCLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyx1QkFBdUIsQ0FDaEQsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFlBQVksRUFDdEMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGFBQWEsQ0FDekMsQ0FBQztRQUNGLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxzQkFBc0IsQ0FDL0MsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFlBQVksRUFDdEMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGFBQWEsQ0FDekMsQ0FBQztJQUNKLENBQUM7O3NIQTdKVSx5QkFBeUI7MEdBQXpCLHlCQUF5QixxYkNqRHRDLDJxSUFxSEEsZ3VERDFGYztRQUNWLE9BQU8sQ0FBQyxhQUFhLEVBQUU7WUFDckIsS0FBSyxDQUNILE1BQU0sRUFDTixLQUFLLENBQUM7Z0JBQ0osT0FBTyxFQUFFLENBQUM7Z0JBQ1YsU0FBUyxFQUFFLE1BQU07YUFDbEIsQ0FBQyxDQUNIO1lBQ0QsS0FBSyxDQUNILE9BQU8sRUFDUCxLQUFLLENBQUM7Z0JBQ0osTUFBTSxFQUFFLENBQUM7Z0JBQ1QsT0FBTyxFQUFFLENBQUM7Z0JBQ1YsT0FBTyxFQUFFLENBQUM7Z0JBQ1YsU0FBUyxFQUFFLENBQUM7YUFDYixDQUFDLENBQ0g7WUFDRCxVQUFVLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztTQUN4RCxDQUFDO0tBQ0g7MkZBRVUseUJBQXlCO2tCQTFCckMsU0FBUzsrQkFDRSxvQkFBb0IsY0FHbEI7d0JBQ1YsT0FBTyxDQUFDLGFBQWEsRUFBRTs0QkFDckIsS0FBSyxDQUNILE1BQU0sRUFDTixLQUFLLENBQUM7Z0NBQ0osT0FBTyxFQUFFLENBQUM7Z0NBQ1YsU0FBUyxFQUFFLE1BQU07NkJBQ2xCLENBQUMsQ0FDSDs0QkFDRCxLQUFLLENBQ0gsT0FBTyxFQUNQLEtBQUssQ0FBQztnQ0FDSixNQUFNLEVBQUUsQ0FBQztnQ0FDVCxPQUFPLEVBQUUsQ0FBQztnQ0FDVixPQUFPLEVBQUUsQ0FBQztnQ0FDVixTQUFTLEVBQUUsQ0FBQzs2QkFDYixDQUFDLENBQ0g7NEJBQ0QsVUFBVSxDQUFDLGdCQUFnQixFQUFFLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7eUJBQ3hELENBQUM7cUJBQ0g7ME1BRzBCLFlBQVk7c0JBQXRDLFNBQVM7dUJBQUMsY0FBYztnQkFDaEIsS0FBSztzQkFBYixLQUFLO2dCQUNHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csY0FBYztzQkFBdEIsS0FBSztnQkFDRyxvQkFBb0I7c0JBQTVCLEtBQUs7Z0JBQ0csV0FBVztzQkFBbkIsS0FBSztnQkFDRyxPQUFPO3NCQUFmLEtBQUs7Z0JBQ0ksY0FBYztzQkFBdkIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHRyaWdnZXIsXG4gIHN0YXRlLFxuICBzdHlsZSxcbiAgdHJhbnNpdGlvbixcbiAgYW5pbWF0ZVxufSBmcm9tICdAYW5ndWxhci9hbmltYXRpb25zJztcbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFZpZXdDaGlsZFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Hcm91cCwgVmFsaWRhdG9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuaW1wb3J0IHsgQ2FsZW5kYXJEYXlzU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvY2FsZW5kYXItZGF5cy5zZXJ2aWNlJztcbmltcG9ydCB7IENhbGVuZGFyTW9udGhzU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvY2FsZW5kYXItbW9udGhzLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ2FsZW5kYXJZZWFyc1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2NhbGVuZGFyLXllYXJzLnNlcnZpY2UnO1xuaW1wb3J0IHN0eWxlc0RlZmF1bHQgZnJvbSAnLi9zdHlsZXMtZGVmYXVsdCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JtLWRhdGVwaWNrZXItbGl0ZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9ibS1kYXRlcGlja2VyLWxpdGUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9zdHlsZXMuc2NzcyddLFxuICBhbmltYXRpb25zOiBbXG4gICAgdHJpZ2dlcigndG9nZ2xlVGFibGUnLCBbXG4gICAgICBzdGF0ZShcbiAgICAgICAgJ29wZW4nLFxuICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBtYXJnaW5Ub3A6ICcxMHB4J1xuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIHN0YXRlKFxuICAgICAgICAnY2xvc2UnLFxuICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICBtYXJnaW5Ub3A6IDBcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICB0cmFuc2l0aW9uKCdvcGVuIDw9PiBjbG9zZScsIFthbmltYXRlKCcuMnMgZWFzZS1vdXQnKV0pXG4gICAgXSlcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBCbURhdGVwaWNrZXJMaXRlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQFZpZXdDaGlsZCgnYm1EYXRlUGlja2VyJykgYm1EYXRlUGlja2VyITogRWxlbWVudFJlZjtcbiAgQElucHV0KCkgbGFiZWw/OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgQElucHV0KCkgc3R5bGVTaGVldDogYW55ID0gbnVsbDtcbiAgQElucHV0KCkgd2Vla2RheXM6IGFueSA9IG51bGw7XG4gIEBJbnB1dCgpIG1vbnRoczogYW55ID0gbnVsbDtcbiAgQElucHV0KCkgZm9ybUdyb3VwSW5wdXQ/OiBGb3JtR3JvdXA7XG4gIEBJbnB1dCgpIGZvcm1Db250cm9sTmFtZUlucHV0OiBzdHJpbmcgPSAnZGVmYXVsdEZvcm1Db250cm9sTmFtZSc7XG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnUGljayBhIGRhdGUnO1xuICBASW5wdXQoKSBwYXR0ZXJuOiBzdHJpbmcgPSAneXl5eS1tbS1kZCc7XG4gIEBPdXRwdXQoKSBjYWxlbmRhck91dHB1dDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gIGlucHV0RGF0YSA9IHsgeWVhcjogJzAnLCBtb250aDogJzAnLCBkYXk6ICcwJyB9O1xuICBzaG93RGF0ZVBpY2tlciA9IGZhbHNlO1xuICBzdHlsZUVsZW1lbnQ6IGFueSA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxuICAgIHB1YmxpYyBjYWxlbmRhclllYXJzU2VydmljZTogQ2FsZW5kYXJZZWFyc1NlcnZpY2UsXG4gICAgcHVibGljIGNhbGVuZGFyTW9udGhzU2VydmljZTogQ2FsZW5kYXJNb250aHNTZXJ2aWNlLFxuICAgIHB1YmxpYyBjYWxlbmRhckRheXNTZXJ2aWNlOiBDYWxlbmRhckRheXNTZXJ2aWNlXG4gICkge31cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmNhbGVuZGFyWWVhcnNTZXJ2aWNlLnllYXIgPSB0aGlzLmRhdGU7XG4gICAgdGhpcy5jYWxlbmRhck1vbnRoc1NlcnZpY2UubW9udGggPSB0aGlzLmRhdGU7XG4gICAgdGhpcy5jYWxlbmRhckRheXNTZXJ2aWNlLmRheSA9IHRoaXMuZGF0ZTtcbiAgICB0aGlzLmNhbGVuZGFyRGF5c1NlcnZpY2Uuc2VsZWN0ZWREYXkgPSBudWxsO1xuICAgICEhdGhpcy53ZWVrZGF5cyAmJiAodGhpcy5jYWxlbmRhckRheXNTZXJ2aWNlLmRheUxhYmVscyA9IHRoaXMud2Vla2RheXMpO1xuICAgICEhdGhpcy5tb250aHMgJiYgKHRoaXMuY2FsZW5kYXJNb250aHNTZXJ2aWNlLm1vbnRoTGFiZWxzID0gdGhpcy5tb250aHMpO1xuXG4gICAgdGhpcy5jcmVhdGVTdHlsZSgpO1xuXG4gICAgY29uc3QgZGl2aWRlcjogYW55ID0gdGhpcy5wYXR0ZXJuLm1hdGNoKCdbIC0uL10nKTtcbiAgICBjb25zdCBwYXR0ZXJuQXJyYXk6IGFueSA9IHRoaXMucGF0dGVybi5zcGxpdChkaXZpZGVyWzBdKTtcbiAgICBjb25zdCB2YWxpZGF0ZVBhdHRlcm4gPSBgWzAtOV17JHtwYXR0ZXJuQXJyYXlbMF0ubGVuZ3RofX0ke2RpdmlkZXJ9WzAtOV17JHtwYXR0ZXJuQXJyYXlbMV0ubGVuZ3RofX0ke2RpdmlkZXJ9WzAtOV17JHtwYXR0ZXJuQXJyYXlbMl0ubGVuZ3RofX1gO1xuICAgIHRoaXMuZm9ybUdyb3VwSW5wdXRcbiAgICAgID8uZ2V0KHRoaXMuZm9ybUNvbnRyb2xOYW1lSW5wdXQpXG4gICAgICA/LmFkZFZhbGlkYXRvcnMoVmFsaWRhdG9ycy5wYXR0ZXJuKHZhbGlkYXRlUGF0dGVybikpO1xuICB9XG5cbiAgY3JlYXRlU3R5bGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3R5bGVFbGVtZW50KSB7XG4gICAgICB0aGlzLnN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdHlsZVNoZWV0KSB7XG4gICAgICB0aGlzLnN0eWxlU2hlZXQgPSB0aGlzLnN0eWxlU2hlZXRcbiAgICAgICAgLnJlcGxhY2UoJ30nLCBgfSAjJHt0aGlzLmZvcm1Db250cm9sTmFtZUlucHV0fSBgKVxuICAgICAgICAucmVwbGFjZSgnLCcsIGAsICMke3RoaXMuZm9ybUNvbnRyb2xOYW1lSW5wdXR9IGApO1xuICAgICAgdGhpcy5zdHlsZVNoZWV0ID0gYCR7c3R5bGVzRGVmYXVsdH0gIyR7dGhpcy5mb3JtQ29udHJvbE5hbWVJbnB1dH0gICR7dGhpcy5zdHlsZVNoZWV0fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3R5bGVTaGVldCA9IHN0eWxlc0RlZmF1bHQ7XG4gICAgfVxuICAgIHRoaXMuc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMuc3R5bGVTaGVldCkpO1xuICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3R5bGVFbGVtZW50KTtcbiAgfVxuXG4gIHNlbGVjdE5leHQgPSAoKSA9PiB7XG4gICAgdGhpcy5jYWxlbmRhck1vbnRoc1NlcnZpY2UubmV4dE1vbnRoKCk7XG4gICAgdGhpcy5jYWxlbmRhclllYXJzU2VydmljZS5zZWxlY3RlZFllYXIgPVxuICAgICAgdGhpcy5jYWxlbmRhck1vbnRoc1NlcnZpY2Uuc2VsZWN0ZWRNb250aCA9PT0gMFxuICAgICAgICA/IHRoaXMuY2FsZW5kYXJZZWFyc1NlcnZpY2Uuc2VsZWN0ZWRZZWFyICsgMVxuICAgICAgICA6IHRoaXMuY2FsZW5kYXJZZWFyc1NlcnZpY2Uuc2VsZWN0ZWRZZWFyO1xuXG4gICAgdGhpcy5zZXRGaXJzdEFuZExhc3REYXkoKTtcbiAgfTtcbiAgc2VsZWN0UHJldmlvdXMgPSAoKSA9PiB7XG4gICAgdGhpcy5jYWxlbmRhck1vbnRoc1NlcnZpY2UucHJldmlvdXNNb250aCgpO1xuICAgIHRoaXMuY2FsZW5kYXJZZWFyc1NlcnZpY2Uuc2VsZWN0ZWRZZWFyID1cbiAgICAgIHRoaXMuY2FsZW5kYXJNb250aHNTZXJ2aWNlLnNlbGVjdGVkTW9udGggPT09IDExXG4gICAgICAgID8gdGhpcy5jYWxlbmRhclllYXJzU2VydmljZS5zZWxlY3RlZFllYXIgLSAxXG4gICAgICAgIDogdGhpcy5jYWxlbmRhclllYXJzU2VydmljZS5zZWxlY3RlZFllYXI7XG5cbiAgICB0aGlzLnNldEZpcnN0QW5kTGFzdERheSgpO1xuICB9O1xuICBzZWxlY3REYXkgPSAoZGF5VmFsdWU6IGFueSkgPT4ge1xuICAgIHRoaXMuaW5wdXREYXRhID0ge1xuICAgICAgeWVhcjogdGhpcy5jYWxlbmRhclllYXJzU2VydmljZS5yZXR1cm5ZZWFyRGF0ZShkYXlWYWx1ZSkudG9TdHJpbmcoKSxcbiAgICAgIG1vbnRoOiB0aGlzLmNhbGVuZGFyTW9udGhzU2VydmljZS5yZXR1cm5Nb250aERhdGUoZGF5VmFsdWUpLnRvU3RyaW5nKCksXG4gICAgICBkYXk6IHRoaXMuY2FsZW5kYXJEYXlzU2VydmljZS5yZXR1cm5XZWVrZGF5RGF0ZShkYXlWYWx1ZSkudG9TdHJpbmcoKVxuICAgIH07XG4gICAgdGhpcy5zZWxlY3RlZERheURhdGUoZGF5VmFsdWUpO1xuICAgIGNvbnN0IGZvcm1hdERhdGUgPSB0aGlzLmZvcm1hdGVkRGF0ZSgpO1xuICAgIHRoaXMuZm9ybUdyb3VwSW5wdXQ/LmNvbnRyb2xzW3RoaXMuZm9ybUNvbnRyb2xOYW1lSW5wdXRdPy5zZXRWYWx1ZShcbiAgICAgIGZvcm1hdERhdGVcbiAgICApO1xuICAgIHRoaXMuY2FsZW5kYXJPdXRwdXQuZW1pdChmb3JtYXREYXRlKTtcbiAgICB0aGlzLmJtRGF0ZVBpY2tlci5uYXRpdmVFbGVtZW50LnZhbHVlID0gZm9ybWF0RGF0ZTtcbiAgICB0aGlzLnNob3dEYXRlUGlja2VyID0gZmFsc2U7XG4gIH07XG5cbiAgc2VsZWN0ZWREYXlEYXRlID0gKGRheURhdGU6IGFueSkgPT4ge1xuICAgIGxldCBwYXJzZWREYXkgPSB0aGlzLmNhbGVuZGFyRGF5c1NlcnZpY2VcbiAgICAgIC5yZXR1cm5XZWVrZGF5RGF0ZShkYXlEYXRlKVxuICAgICAgLnRvU3RyaW5nKCk7XG4gICAgbGV0IHNlbGVjdFBhcnNlZE1vbnRoID1cbiAgICAgIHRoaXMuY2FsZW5kYXJNb250aHNTZXJ2aWNlLnJldHVybk1vbnRoRGF0ZShkYXlEYXRlKSArIDE7XG4gICAgc2VsZWN0UGFyc2VkTW9udGggPSBzZWxlY3RQYXJzZWRNb250aC50b1N0cmluZygpO1xuICAgIHNlbGVjdFBhcnNlZE1vbnRoLmxlbmd0aCA8IDIgJiZcbiAgICAgIChzZWxlY3RQYXJzZWRNb250aCA9IGAwJHtzZWxlY3RQYXJzZWRNb250aH1gKTtcbiAgICBsZXQgcGFyc2VkWWVhciA9IHRoaXMuY2FsZW5kYXJZZWFyc1NlcnZpY2VcbiAgICAgIC5yZXR1cm5ZZWFyRGF0ZShkYXlEYXRlKVxuICAgICAgLnRvU3RyaW5nKCk7XG4gICAgaWYgKHBhcnNlZERheS5sZW5ndGggPCAyKSBwYXJzZWREYXkgPSBgMCR7cGFyc2VkRGF5fWA7XG4gICAgaWYgKFxuICAgICAgcGFyc2VkWWVhciA9PT0gdGhpcy5pbnB1dERhdGEueWVhciAmJlxuICAgICAgc2VsZWN0UGFyc2VkTW9udGggPT09IHRoaXMuaW5wdXREYXRhLm1vbnRoICYmXG4gICAgICBwYXJzZWREYXkgPT09IHRoaXMuaW5wdXREYXRhLmRheVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmb3JtYXRlZERhdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgZm9ybWF0ZWRNb250aCA9IHBhcnNlSW50KHRoaXMuaW5wdXREYXRhLm1vbnRoKSArIDE7XG4gICAgZm9ybWF0ZWRNb250aC50b1N0cmluZygpLmxlbmd0aCA8IDJcbiAgICAgID8gKHRoaXMuaW5wdXREYXRhLm1vbnRoID0gYDAke2Zvcm1hdGVkTW9udGgudG9TdHJpbmcoKX1gKVxuICAgICAgOiAodGhpcy5pbnB1dERhdGEubW9udGggPSBgJHtmb3JtYXRlZE1vbnRoLnRvU3RyaW5nKCl9YCk7XG5cbiAgICB0aGlzLmlucHV0RGF0YS5kYXkubGVuZ3RoIDwgMiAmJlxuICAgICAgKHRoaXMuaW5wdXREYXRhLmRheSA9IGAwJHt0aGlzLmlucHV0RGF0YS5kYXl9YCk7XG4gICAgbGV0IGZvcm1hdGVkWWVhciA9IHRoaXMuaW5wdXREYXRhLnllYXIudG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IGdldEZ1bGxZZWFyOiBhbnkgPSB0aGlzLnBhdHRlcm4ubWF0Y2goJ3l5eXknKTtcbiAgICBpZiAoZ2V0RnVsbFllYXIgPT09IG51bGwpIHtcbiAgICAgIGZvcm1hdGVkWWVhciA9XG4gICAgICAgIGZvcm1hdGVkWWVhci5zbGljZSgtMSwgMSkgKyBmb3JtYXRlZFllYXIuc2xpY2UoMiwgZm9ybWF0ZWRZZWFyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgY29uc3QgZGl2aWRlcjogYW55ID0gdGhpcy5wYXR0ZXJuLm1hdGNoKCdbIC0uL10nKTtcbiAgICBsZXQgZGF0ZUFycmF5OiBhbnkgPSBbXTtcbiAgICBjb25zdCBwYXR0ZXJuQXJyYXk6IGFueSA9IHRoaXMucGF0dGVybi5zcGxpdChkaXZpZGVyWzBdKTtcbiAgICBwYXR0ZXJuQXJyYXkuZm9yRWFjaCgoZm9ybWF0OiBzdHJpbmcpID0+IHtcbiAgICAgIGlmIChmb3JtYXQgPT09ICdkZCcpIHtcbiAgICAgICAgZGF0ZUFycmF5LnB1c2godGhpcy5pbnB1dERhdGEuZGF5KTtcbiAgICAgIH0gZWxzZSBpZiAoZm9ybWF0ID09PSAnbW0nKSB7XG4gICAgICAgIGRhdGVBcnJheS5wdXNoKHRoaXMuaW5wdXREYXRhLm1vbnRoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGVBcnJheS5wdXNoKGZvcm1hdGVkWWVhcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGAke2RhdGVBcnJheVswXX0ke2RpdmlkZXJ9JHtkYXRlQXJyYXlbMV19JHtkaXZpZGVyfSR7ZGF0ZUFycmF5WzJdfWA7XG4gIH07XG5cbiAgc2V0Rmlyc3RBbmRMYXN0RGF5KCkge1xuICAgIHRoaXMuY2FsZW5kYXJNb250aHNTZXJ2aWNlLmZpcnN0RGF5T2ZTZWxlY3RlZE1vbnRoKFxuICAgICAgdGhpcy5jYWxlbmRhclllYXJzU2VydmljZS5zZWxlY3RlZFllYXIsXG4gICAgICB0aGlzLmNhbGVuZGFyTW9udGhzU2VydmljZS5zZWxlY3RlZE1vbnRoXG4gICAgKTtcbiAgICB0aGlzLmNhbGVuZGFyTW9udGhzU2VydmljZS5sYXN0RGF5T2ZTZWxlY3RlZE1vbnRoKFxuICAgICAgdGhpcy5jYWxlbmRhclllYXJzU2VydmljZS5zZWxlY3RlZFllYXIsXG4gICAgICB0aGlzLmNhbGVuZGFyTW9udGhzU2VydmljZS5zZWxlY3RlZE1vbnRoXG4gICAgKTtcbiAgfVxufVxuIiwiPGRpdiBpZD1cInt7IGZvcm1Db250cm9sTmFtZUlucHV0IH19XCI+XG4gIDxsYWJlbCBmb3I9XCJibS1kYXRlLWlucHV0XCI+e3sgbGFiZWwgfX08L2xhYmVsPlxuICA8ZGl2IGNsYXNzPVwiYm0tZGF0ZS1pbnB1dC13cmFwcGVyXCI+XG4gICAgPGRpdiAqbmdJZj1cIiFmb3JtR3JvdXBJbnB1dFwiIGNsYXNzPVwiYm0tZGF0ZS1pbnB1dC13cmFwcGVyXCI+XG4gICAgICA8aW5wdXRcbiAgICAgICAgI2JtRGF0ZVBpY2tlclxuICAgICAgICByZWFkb25seVxuICAgICAgICBbcGF0dGVybl09XCJwYXR0ZXJuXCJcbiAgICAgICAgcGxhY2Vob2xkZXI9XCJ7eyBwbGFjZWhvbGRlciB9fVwiXG4gICAgICAgIGNsYXNzPVwiYm0tZGF0ZS1pbnB1dCBibS1kYXRlLWlucHV0LXBvaW50ZXJcIiAvPlxuICAgIDwvZGl2PlxuICAgIDxkaXZcbiAgICAgICpuZ0lmPVwiISFmb3JtR3JvdXBJbnB1dFwiXG4gICAgICBbZm9ybUdyb3VwXT1cImZvcm1Hcm91cElucHV0XCJcbiAgICAgIGNsYXNzPVwiYm0tZGF0ZS1pbnB1dC13cmFwcGVyXCI+XG4gICAgICA8aW5wdXRcbiAgICAgICAgI2JtRGF0ZVBpY2tlclxuICAgICAgICByZWFkb25seVxuICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJ7eyBmb3JtQ29udHJvbE5hbWVJbnB1dCB9fVwiXG4gICAgICAgIHBsYWNlaG9sZGVyPVwie3sgcGxhY2Vob2xkZXIgfX1cIlxuICAgICAgICBjbGFzcz1cImJtLWRhdGUtaW5wdXQgYm0tZGF0ZS1pbnB1dC1wb2ludGVyXCIgLz5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiYm0tdG9nZ2xlLWJ1dHRvblwiIChjbGljayk9XCJzaG93RGF0ZVBpY2tlciA9ICFzaG93RGF0ZVBpY2tlclwiPlxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgPGRpdiBjbGFzcz1cImJtLWRlZmF1bHQtY2FsZW5kYXIgYm0tZGVmYXVsdC1jYWxlbmRhci1pY29uXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ1cHBlci1saW5lXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImlubmVyXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImlubmVyXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW5uZXItbGluZVwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG4gIDxkaXYgW0B0b2dnbGVUYWJsZV09XCJzaG93RGF0ZVBpY2tlciA/ICdvcGVuJyA6ICdjbG9zZSdcIiBjbGFzcz1cImJtLXRhYmxlXCI+XG4gICAgPGRpdiBjbGFzcz1cImJtLXRyXCI+XG4gICAgICA8ZGl2XG4gICAgICAgICpuZ0lmPVwiXG4gICAgICAgICAgY2FsZW5kYXJZZWFyc1NlcnZpY2Uuc2VsZWN0ZWRZZWFyID09PVxuICAgICAgICAgICAgY2FsZW5kYXJZZWFyc1NlcnZpY2UuY3VycmVudFllYXIgJiZcbiAgICAgICAgICAgIGNhbGVuZGFyTW9udGhzU2VydmljZS5zZWxlY3RlZE1vbnRoID09PVxuICAgICAgICAgICAgICBjYWxlbmRhck1vbnRoc1NlcnZpY2UuY3VycmVudE1vbnRoO1xuICAgICAgICAgIGVsc2UgcHJldmlvdXNZZWFyQnV0dG9uXG4gICAgICAgIFwiXG4gICAgICAgIGNsYXNzPVwiYm0tdGQtZW1wdHktbW9udGhcIj48L2Rpdj5cbiAgICAgIDxuZy10ZW1wbGF0ZSAjcHJldmlvdXNZZWFyQnV0dG9uPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYm0tdGRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYm0tdGQtaW5uZXJcIiAoY2xpY2spPVwic2VsZWN0UHJldmlvdXMoKVwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJibS1hcnJvdyBibS1hcnJvdy1sZWZ0XCI+PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICA8ZGl2IGNsYXNzPVwiYm0teWVhci1tb250aC10aXRsZVwiPlxuICAgICAgICA8cCBjbGFzcz1cImJtLWRhdGUtcCBibS1tb250aC10aXRsZVwiPlxuICAgICAgICAgIHt7IGNhbGVuZGFyTW9udGhzU2VydmljZS5zZWxlY3RlZE1vbnRoTmFtZSB9fVxuICAgICAgICA8L3A+XG4gICAgICAgIDxwIGNsYXNzPVwiYm0tZGF0ZS1wIGJtLXllYXItdGl0bGVcIj5cbiAgICAgICAgICB7eyBjYWxlbmRhclllYXJzU2VydmljZS5zZWxlY3RlZFllYXIgfX1cbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiYm0tdGRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJtLXRkLWlubmVyXCIgKGNsaWNrKT1cInNlbGVjdE5leHQoKVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYm0tYXJyb3cgYm0tYXJyb3ctcmlnaHRcIj48L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImJtLXRyIGJtLWRheWxhYmVscy13cmFwcGVyXCI+XG4gICAgICA8ZGl2XG4gICAgICAgICpuZ0Zvcj1cImxldCB3ZWVrZGF5TGFiZWwgb2YgY2FsZW5kYXJEYXlzU2VydmljZS5kYXlMYWJlbHNcIlxuICAgICAgICBjbGFzcz1cImJtLXRoXCI+XG4gICAgICAgIDxwIGNsYXNzPVwiYm0tZGF0ZS1wXCI+e3sgd2Vla2RheUxhYmVsIH19PC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdlxuICAgICAgKm5nRm9yPVwibGV0IHdlZWtSb3cgb2YgY2FsZW5kYXJNb250aHNTZXJ2aWNlLnNlbGVjdGVkTW9udGhEYXlzQXJyYXlcIlxuICAgICAgY2xhc3M9XCJibS10clwiPlxuICAgICAgPGRpdlxuICAgICAgICAqbmdGb3I9XCJsZXQgZGF5RGF0ZSBvZiB3ZWVrUm93OyBsZXQgZGF5SW5kZXggPSBpbmRleFwiXG4gICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAnYm0tdGQnOiBkYXlEYXRlLFxuICAgICAgICAgICdibS10ZC1lbXB0eSc6ICFkYXlEYXRlXG4gICAgICAgIH1cIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIChjbGljayk9XCJzZWxlY3REYXkoZGF5RGF0ZSlcIlxuICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICdibS10ZC1pbm5lcic6IGRheURhdGUsXG4gICAgICAgICAgICAnYm0tdGQtaW5uZXItZW1wdHknOiAhZGF5RGF0ZSxcbiAgICAgICAgICAgICdibS10ZC1jdXJyZW50LWRheSc6XG4gICAgICAgICAgICAgIGNhbGVuZGFyWWVhcnNTZXJ2aWNlLnNlbGVjdGVkWWVhciA9PT1cbiAgICAgICAgICAgICAgICBjYWxlbmRhclllYXJzU2VydmljZS5jdXJyZW50WWVhciAmJlxuICAgICAgICAgICAgICBjYWxlbmRhck1vbnRoc1NlcnZpY2Uuc2VsZWN0ZWRNb250aCA9PT1cbiAgICAgICAgICAgICAgICBjYWxlbmRhck1vbnRoc1NlcnZpY2UuY3VycmVudE1vbnRoICYmXG4gICAgICAgICAgICAgIGRheURhdGUgJiZcbiAgICAgICAgICAgICAgY2FsZW5kYXJEYXlzU2VydmljZS5yZXR1cm5XZWVrZGF5RGF0ZShkYXlEYXRlKSA9PT1cbiAgICAgICAgICAgICAgICBjYWxlbmRhckRheXNTZXJ2aWNlLmN1cnJlbnREYXkgJiZcbiAgICAgICAgICAgICAgY2FsZW5kYXJEYXlzU2VydmljZS5zZWxlY3RlZERheSAhPT1cbiAgICAgICAgICAgICAgICBjYWxlbmRhckRheXNTZXJ2aWNlLnJldHVybldlZWtkYXlEYXRlKGRheURhdGUpLFxuICAgICAgICAgICAgJ2JtLXRkLWJlZm9yZS1kYXknOlxuICAgICAgICAgICAgICBjYWxlbmRhclllYXJzU2VydmljZS5zZWxlY3RlZFllYXIgPT09XG4gICAgICAgICAgICAgICAgY2FsZW5kYXJZZWFyc1NlcnZpY2UuY3VycmVudFllYXIgJiZcbiAgICAgICAgICAgICAgY2FsZW5kYXJNb250aHNTZXJ2aWNlLnNlbGVjdGVkTW9udGggPT09XG4gICAgICAgICAgICAgICAgY2FsZW5kYXJNb250aHNTZXJ2aWNlLmN1cnJlbnRNb250aCAmJlxuICAgICAgICAgICAgICBkYXlEYXRlICYmXG4gICAgICAgICAgICAgIGNhbGVuZGFyRGF5c1NlcnZpY2UucmV0dXJuV2Vla2RheURhdGUoZGF5RGF0ZSkgPFxuICAgICAgICAgICAgICAgIGNhbGVuZGFyRGF5c1NlcnZpY2UuY3VycmVudERheSxcbiAgICAgICAgICAgICdibS10ZC1zZWxlY3RlZC1kYXknOiBkYXlEYXRlICYmIHNlbGVjdGVkRGF5RGF0ZShkYXlEYXRlKVxuICAgICAgICAgIH1cIj5cbiAgICAgICAgICA8cFxuICAgICAgICAgICAgY2xhc3M9XCJibS1kYXRlLXBcIlxuICAgICAgICAgICAgW2NsYXNzLmJtLXdlZWtlbmRdPVwiZGF5RGF0ZSAmJiAoZGF5SW5kZXggPT09IDUgfHwgZGF5SW5kZXggPT09IDYpXCI+XG4gICAgICAgICAgICB7eyBkYXlEYXRlICYmIGNhbGVuZGFyRGF5c1NlcnZpY2UucmV0dXJuV2Vla2RheURhdGUoZGF5RGF0ZSkgfX1cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+XG4iXX0=